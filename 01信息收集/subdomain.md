
## subdomain 子域

### crt.sh

> 利用[crt.sh](https://crt.sh/)去查找需要的域名

```
https://crt.sh/?q=%.yahoo.com

%.yahoo.com
```

![search yahoo](https://i.loli.net/2020/01/17/4LwHBhlY96SQcMs.png)

crt.sh提供了atom格式的订阅，通过rss订阅软件可以对需要的域名进行监测，监测的域名证书有变化时，就会有通知。

```
https://crt.sh/atom?q=yahoo.com
```

> 快速收集脚本shell脚本

```
curl -s https://crt.sh/\?q\=\%.$1\&output\=json | jq -r '.[].name_value' | sed 's/\*\.//g' | sort -u
```

crt.sh提供了PostgreSQL数据库接口，可以直接从PostgreSQL数据库中提取子域名。下面提供了一个脚本。

```shell
#!/bin/sh

# Script by Hanno Bock - https://github.com/hannob/tlshelpers/blob/master/getsubdomain

query="SELECT ci.NAME_VALUE NAME_VALUE FROM certificate_identity ci WHERE ci.NAME_TYPE = 'dNSName' AND reverse(lower(ci.NAME_VALUE)) LIKE reverse(lower('%.$1'));"

echo $query | \
    psql -t -h crt.sh -p 5432 -U guest certwatch | \
    sed -e 's:^ *::g' -e 's:^*\.::g' -e '/^$/d' | \
    sort -u | sed -e 's:*.::g'
```

---

> 其他的一些shell脚本


    curl https://www.threatcrowd.org/searchApi/v2/domain/report/\?domain=$1 |jq .subdomains |grep -o ‘\w.*$1’
    
    curl https://api.hackertarget.com/hostsearch/\?q\=$1 | grep -o '\w.*$1'
    
    curl https://crt.sh/?q=%.$1 | grep "$1" | cut -d '>' -f2 | cut -d '<' -f1 | grep -v " " | sort -u
    
    curl https://certspotter.com/api/v0/certs?domain=$1 | grep  -o '\[\".*\"\]'

> 收集完域名之后，可以利用httprobe对域名的可用性进行判断

url：https://github.com/tomnomnom/httprobe

    cat recon/example/domains.txt | httprobe

### 利用github进行子域收集

[github-subdomains](https://github.com/gwen001/github-search/blob/master/github-subdomains.py)

### Sublist3r

https://github.com/aboul3la/Sublist3r


## 在线

https://spyse.com/

## subbrute

DNS元数据爬取，枚举DNS记录和子域

https://github.com/TheRook/subbrute

## OneForAll

https://github.com/shmilylty/OneForAll

## spyse

https://spyse.com/

## virustotal

https://www.virustotal.com/gui/home/search

## censys.io

https://censys.io/

https://github.com/0xbharath/censys-enumeration

## facebook

https://developers.facebook.com/tools/ct/

## assetfinder

https://github.com/tomnomnom/assetfinder/releases

https://appsecco.com/books/subdomain-enumeration/
















